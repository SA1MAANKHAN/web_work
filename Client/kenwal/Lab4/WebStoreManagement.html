<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- loading js  -->
    <script type="text/javascript" src="js/model.js"></script>
    <title>WebStoreManagement</title>
  </head>
  <body>
    <div class="go__back">
      <a href="./WebStore.html"> <h1>Go Back to site</h1></a>
    </div>
    <div class="orders">
      <a href="./Order.html"><h1>Orders</h1></a>
    </div>
    <form class="newItem">
      <h2>Add or Modify Products</h2>
      <label for="">Name:</label>
      <input required class="newItem__name" type="text" />
      <label for="">Price:</label>
      <input required class="newItem__price" type="number" />
      <label for="">Image Url:</label>
      <input required class="newItem__image" type="text" />
      <label for="">Units:</label>
      <input required class="newItem__units" type="text" />
      <label for="">Description:</label>
      <input required class="newItem__description" type="text" />
      <label for="">Category:</label>
      <select
        required
        id="category"
        class="newItem__category"
        name="category"
        size="3"
      >
        <option value="coffee">Coffee</option>
        <option value="tea">Tea</option>
        <option value="pastries">Pastries</option>
      </select>
      <button class="newItem__btn">Add</button>
    </form>

    <!-- <form class="modify">
      <h2>Modify Products</h2>
      <label for="">Name:</label>
      <input required class="modify__name" type="text" />

      <button class="modify__btn">Modify</button>
    </form> -->

    <form class="delete">
      <h2>Delete Products</h2>
      <label for="">Name:</label>
      <input required class="delete__name" type="text" />

      <button class="delete__btn">Delete</button>
    </form>

    <!-- <form class="modify__item">
      <h2>Add or Modify Products</h2>
      <label for="">Name:</label>
      <input required class="modify__name" type="text" value=${product.name} />
      <label for="">Price:</label>
      <input required class="modify__price" type="number" value=${product.price}/>
      <label for="">Image Url:</label>
      <input required class="modify__image" type="text" value=${product.image}/>
      <label for="">Units:</label>
      <input required class="modify__units" type="text" value=${product.units}/>
      <label for="">Description:</label>
      <input required class="modify__description" type="text" />
      
      <button class="modify__btn">Modify</button>
    </form> -->

    <!-- <div class="${product.name"}>
      <img src="${product.image}" alt="${product.name}" />
      <h3>${product.name}</h3>
      <p>${product.category}</p>
    </div> -->

    <div class="items__container"></div>
    <div class="order__container"></div>

    <!-- <script src="js/app.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
      $(document).ready(function () {
        // to display orders
        var allOrders = JSON.parse(localStorage.getItem("orders"));

        for (var order in allOrders) {
          // $(".items__container").

          for (var orderItem in allOrders[order])
            $(`
              <h3>${allOrders[order][orderItem]} </h3>
        <p>${orderItem}</p>
        `).insertAfter($(".order__container"));

          $(` <h1>${order}</h3>`).insertAfter($(".order__container"));
        }

        // to display items
        var products = JSON.parse(localStorage.getItem("productDetails"));
        for (var product in products) {
          // $(".items__container").
          if (products[product].name == "Tax") {
            continue;
          }
          $(`

            <div class=${products[product].name} products[product]}>

              <h3>${products[product].name}</h3>
        <p>${products[product].category}</p>
        </div>
        `).insertAfter($(".items__container"));
        }

        // to add new items
        $(".newItem__btn").click(function (e) {
          // e.preventDefault();
          console.log("Click");

          name = $(".newItem__name").val();
          price = $(".newItem__price").val();
          image = $(".newItem__image").val();
          category = $(".newItem__category").val();
          description = $(".newItem__description").val();
          units = $(".newItem__units").val();

          // console.log(newItem);
          console.log(
            addNewItems(name, image, description, units, price, category)
          );

          // console.log(getPro)

          // localStorage.setItem(newItem.name, JSON.stringify(newItem));
          // localStorage.getItem("pizza");
        });

        // to delete items
        $(".delete__btn").click(function (e) {
          // e.preventDefault();
          console.log("Click");

          name = $(".delete__name").val();

          console.log(name);

          const storage = JSON.parse(localStorage.getItem("productDetails"));
          console.log(JSON.parse(localStorage.getItem("productDetails")));
          delete storage[name];
          localStorage.setItem("productDetails", JSON.stringify(storage));
          console.log(JSON.parse(localStorage.getItem("productDetails")));
        });

        // to modify items
        //   $(".modify__btn").click(function (e) {
        //     e.preventDefault();
        //     console.log("Click");

        //     modName = $(".modify__name").val();

        //     console.log(modName);

        //     const products = JSON.parse(localStorage.getItem("productDetails"));
        //     console.log(JSON.parse(localStorage.getItem("productDetails")));

        //     $(".modify").html(`<form class="modify__item">
        //   <h2>Add or Modify Products</h2>
        //   <label for="">Name:</label>
        //   <input required class="modify__name" type="text" value=${
        //     products[modName].name
        //   } />
        //   <label for="">Price:</label>
        //   <input required class="modify__price" placeholder="New Price" type="number"  value=${products[
        //     modName
        //   ].price.replace(/\/$/, "")}/>
        //   <label for="">Image Url:</label>
        //   <input required class="modify__image" type="text" value=${
        //     products[modName].image
        //   }/>
        //   <label for="">Units:</label>
        //   <input required class="modify__units" type="text" value=${
        //     products[modName].units
        //   }/>
        //   <label for="">Description:</label>
        //   <input required class="modify__description" type="text"  value=${
        //     products[modName].description
        //   }/>

        //   <button class="saveModification__btn">Modify</button>
        // </form>`);

        // const storage = JSON.parse(localStorage.getItem("productDetails"));
        // console.log(JSON.parse(localStorage.getItem("productDetails")));
        // localStorage.setItem("productDetails", JSON.stringify(storage));
        // console.log(JSON.parse(localStorage.getItem("productDetails")));
      });

      // $(".saveModification__btn").click(function (e) {
      //   e.preventDefault();

      //   console.log(modified);

      //   name = $(".newItem__name").val();
      //   price = $(".newItem__price").val();
      //   image = $(".newItem__image").val();
      //   description = $(".newItem__description").val();
      //   units = $(".newItem__units").val();

      //   // console.log(newItem);
      //   console.log(addNewItems(name, image, description, units, price));
      // });
      // });
    </script>
  </body>
</html>
